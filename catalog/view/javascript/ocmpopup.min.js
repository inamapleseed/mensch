(function(window){function OCMPopup(params){var _self=this,zindex=999999,onButtonAction,close,loader='<div class="ocm-loading"></div>';var style=`<style type="text/css">\n                    .ocm-overflow-hidden {\n                        overflow:hidden !important;\n                    }\n                    .ocm-flex-centered {\n                        display: -webkit-box;\n                        display: -ms-flexbox;\n                        display: flex;\n                        -webkit-box-align: center;\n                        -ms-flex-align: center;\n                        align-items: center;\n                        -webkit-box-pack: center;\n                        -ms-flex-pack: center;\n                        justify-content: center;\n                    }\n                    .ocm-popup-wrapper {\n                        position: fixed;\n                        width: 100%;\n                        height: 100%;\n                        top: 0;\n                        left: 0;\n                        right: 0;\n                        bottom: 0;\n                        z-index: 1000000;\n                        -webkit-overflow-scrolling: touch;\n                        background: rgba(0, 0, 0, 0.65);\n                    }\n                    .ocm-popup-container {\n                        opacity: 1;\n                        position: relative;\n                        display: block;\n                        margin: 0 auto;\n                        max-width: 95%;\n                        width: 350px;\n                    }\n                    .ocm-popup-header {\n                        position: relative;\n                    }\n                    .ocm-popup-title {\n                        margin: 0;\n                        color: #fff;\n                        background: #229ac8;\n                        padding: 10px;\n                        font-size: 15px;\n                        font-weight: 500;\n                    }\n                    .ocm-popup-close {\n                        position: absolute;\n                        right: 5px;\n                        top: 1px;\n                        color: #525050;\n                        font-size: 22px;\n                        outline: 0;\n                        cursor: pointer;\n                        z-index: 1000;\n                        text-align: center;\n                        line-height: 100%;\n                        text-decoration: none;\n                    }\n                    .ocm-popup-close:hover {\n                      color: #a0a0a0;\n                    }\n                    .ocm-have-title .ocm-popup-close {\n                        font-size: 24px;\n                        color: #ffffff;\n                        right: 8px;\n                        top: -1px;\n                        display: table;\n                        text-align: center;\n                        height: 100%;\n                    }\n                    .ocm-have-title .ocm-popup-close span {\n                        display: table-cell;\n                        vertical-align: middle;\n                    }\n                    .ocm-have-title .ocm-popup-close:hover {\n                        color: #eaeaea;\n                    }\n                    .ocm-popup-body {\n                        box-shadow: 0 0 50px -10px;\n                        background: #ffffff;\n                        overflow: hidden;\n                    }\n                    .ocm-popup-content {\n                        position: relative;\n                        overflow: hidden;\n                        min-height: 120px;\n                    }\n                    .ocm-popup-footer {\n                        border-top: 1px solid #ddd;\n                        background: #f5f5f5;\n                        padding: 10px;\n                        text-align: right;\n                    }\n                    .ocm-popup-footer button {\n                        display: inline-block;\n                        margin-bottom: 0;\n                        font-weight: normal;\n                        text-align: center;\n                        vertical-align: middle;\n                        touch-action: manipulation;\n                        cursor: pointer;\n                        background-image: none;\n                        border: 1px solid transparent;\n                        white-space: nowrap;\n                        padding: 7px 10px;\n                        font-size: 13px;\n                        line-height: 1.42857;\n                        border-radius: 3px;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                        user-select: none;\n                    }\n                    .ocm-button-loading {\n                        display: inline-block;\n                        padding: 4px;\n                        border-radius: 50%;\n                        border: 2px solid #fff;\n                        border-right-color: #d6d6d6;\n                        border-bottom-color: #d6d6d6;\n                        margin-right: 3px;\n                         -webkit-animation: ocm-rotate .5s infinite linear;\n                        -moz-animation: ocm-rotate .5s infinite linear;\n                        -o-animation: ocm-rotate .5s infinite linear;\n                        animation: ocm-rotate .5s infinite ease-in;\n                    }\n                    .ocm-loading {\n                        height: 0;\n                        width: 0;\n                        padding: 12px;\n                        border: 5px solid #ccc;\n                        border-right-color: #888;\n                        border-radius: 22px;\n                        -webkit-animation: ocm-rotate 1s infinite linear;\n                        -moz-animation: ocm-rotate 1s infinite linear;\n                        -o-animation: ocm-rotate 1s infinite linear;\n                        animation: ocm-rotate 1s infinite linear;\n                        position: absolute;\n                        left: 50%;\n                        top: 50%;\n                        margin-top: -17px;\n                        margin-left: -17px;\n                    }\n                    .ocm-popup-footer button.btn-danger {\n                        color: #ffffff;\n                        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\n                        background-color: #da4f49;\n                        background-repeat: repeat-x;\n                    }\n                    .ocm-popup-footer button.btn-danger:hover {\n                        background-color: #c9302c;\n                        border-color: #ac2925;\n                    }\n                    html[dir="rtl"] .ocm-popup-close {\n                       left: 8px;\n                       right: auto;\n                    }\n                    @-webkit-keyframes ocm-rotate {\n                        100% {\n                            -webkit-transform: rotate(360deg);\n                        }\n                    }\n                    @-moz-keyframes ocm-rotate {\n                        100% {\n                            -webkit-transform: rotate(360deg);\n                        }\n                    }\n                    @-o-keyframes ocm-rotate {\n                        100% {\n                            -webkit-transform: rotate(360deg);\n                        }\n                    }\n                    @keyframes ocm-rotate {\n                        100% {\n                            transform: rotate(360deg);\n                        }\n                    }\n            </style>`;function wrapStyleTag(css){return css?'style="'+css+'"':""}this.setParams=function setParams(params){var defaults={width:"500",title:false,btns:[],onClose:$.noop,showClose:true,maxHeight:300,minHeight:120,modal:false,scrollable:false,offsetTop:"60px"};this.params=Object.assign({},defaults,params||{});this.setWidthUnit();this.getDom();return this};this.setWidthUnit=function setWidthUnit(){if(!isNaN(this.params.width)||this.params.width.indexOf("%")===-1&&this.params.width.indexOf("px")===-1){this.params.width+="px"}};this.updateParams=function(params){for(var key in params){this.params[key]=params[key]}this.setWidthUnit();this.getDom();return this};this.onButtonAction=function onButtonAction(e){if($(e.target).find("i").hasClass("fa-spinner")){return}var btn=this.params.btns[parseInt($(e.target).attr("rel"))];var cb=window[btn.fn]||btn.fn;if(typeof cb=="function"){cb.call(null,parseInt($(e.target).attr("rel")))}};this.showButtonLoader=function buttonLoader(index){var btn=$("#"+this.id).find(".ocm-popup-footer button")[index];if(btn){$(btn).attr("disabled",true).prepend('<i class="ocm-button-loading"></i>')}return this};this.hideButtonLoader=function hideButtonLoader(){$("#"+this.id).find(".ocm-popup-footer button").removeAttr("disabled");$("#"+this.id).find(".ocm-popup-footer button i").remove();return this};this.hideLoader=function hideLoader(){$("#"+this.id).find(".ocm-loading").remove();return this};this.hideFooter=function hideFooter(){$("#"+this.id).find(".ocm-popup-footer").hide();return this};this.showFooter=function showFooter(){$("#"+this.id).find(".ocm-popup-footer").show();return this};this.close=function close(){$("#"+this.id).remove();if(this.params.scrollable){$("body").removeClass("ocm-overflow-hidden")}this.params.onClose.call(null);return this};this.overlayClose=function overlayClose(event){if(event.target===event.currentTarget){_self.close()}return this};this.getId=function getId(){return this.id};this.show=function show(){$("#"+this.id).remove();$("body").append(this.popup);$("#"+this.id).show();$("#"+this.id+" .ocm-popup-footer button").click(onButtonAction);$("#"+this.id+" .ocm-popup-close").click(close);if(this.params.scrollable){$("body").addClass("ocm-overflow-hidden")}if(!this.params.modal){$("#"+this.id).click(overlayClose)}return this};this.setContent=function setContent(html,scrollTop){$("#"+this.id+" .ocm-popup-content").html(html);if(scrollTop){$("#"+this.id+" .ocm-popup-body").scrollTop(0)}return this};this.setContentById=function setContentById(id,remove){var html=$("#"+id).html();$("#"+this.id+" .ocm-popup-content").html(html);if(remove){$("#"+id).remove()}};this.getContent=function getContent(){return $("#"+this.id+" .ocm-popup-content").html().replace(loader,"")};this.getDom=function getDom(){var popup="",attr="",wrapper_css="",wrapper_class="",body_css="",container_css="",container_class="",content_css="";container_css+="width: "+this.params.width+";";wrapper_css+="z-index:"+this.zindex+";";if(this.params["scrollable"]){wrapper_css+="overflow:auto;";container_css+="margin-top: "+this.params["offsetTop"]+";"}else{wrapper_class+=" ocm-flex-centered"}if(this.params["maxHeight"]&&!this.params["scrollable"]){body_css+="max-height: "+this.params.maxHeight+"px; overflow:auto;"}if(this.params["minHeight"]){content_css+="min-height: "+this.params.minHeight+"px;"}if(this.params.title){container_class+=" ocm-have-title"}popup+='<div id="'+this.id+'" '+wrapStyleTag(wrapper_css)+' class="ocm-popup-wrapper'+wrapper_class+'">';popup+=" <div "+wrapStyleTag(container_css)+' class="ocm-popup-container'+container_class+'">';if(this.params.title||this.params.showClose){popup+='<div class="ocm-popup-header">';if(this.params.title){popup+='  <div class="ocm-popup-title">'+this.params.title+"</div>"}if(this.params.showClose){popup+='   <a class="ocm-popup-close"><span>&times;</span></a>'}popup+="</div>"}popup+='   <div class="ocm-popup-body" '+wrapStyleTag(body_css)+">";popup+='   <div class="ocm-popup-content" '+wrapStyleTag(content_css)+">";popup+=loader;popup+="   </div>";popup+="   </div>";if(this.params.btns.length>0){popup+='  <div class="ocm-popup-footer">';for(var i=0;i<this.params.btns.length;i++){var btn=this.params.btns[i];var btn_type=btn.type||"primary";var btn_ttile=btn.title||"Submit";popup+=' <button type="button" rel="'+i+'" class="btn btn-'+btn_type+'">'+btn_ttile+"</button>"}popup+="  </div>"}popup+=" </div>";popup+="</div>";this.popup=popup};onButtonAction=this.onButtonAction.bind(this);close=this.close.bind(this);overlayClose=this.overlayClose.bind(this);this.id="ocm-popup"+Math.floor(Math.random()*100)+Math.floor(Math.random()*100);this.zindex=zindex++;this.setParams(params);$("head").append(style)}window.OCMPopup=OCMPopup})(window);